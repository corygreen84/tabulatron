{"remainingRequest":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/vue-music-notation/src/components/Staff.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/vue-music-notation/src/components/Staff.vue","mtime":1642705062000},{"path":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/cache-loader/dist/cjs.js","mtime":1642660805000},{"path":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/babel-loader/lib/index.js","mtime":1642660805000},{"path":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/cache-loader/dist/cjs.js","mtime":1642660805000},{"path":"/Users/corygreen/Desktop/tabulatron/tabulatron/node_modules/vue-loader/lib/index.js","mtime":1642660804000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUcmVibGVDbGVmIGZyb20gJy4vYmFzZS9UcmVibGVDbGVmJzsKaW1wb3J0IEJhc3NDbGVmIGZyb20gJy4vYmFzZS9CYXNzQ2xlZic7CmltcG9ydCBOb3RlIGZyb20gJy4vYmFzZS9Ob3RlJzsKaW1wb3J0IFNoYXJwIGZyb20gJy4vYmFzZS9TaGFycCc7Cgpjb25zdCBMSU5FX0hFSUdIVCA9IDEwOwpjb25zdCBUT1BfT0ZGU0VUID0gMzsKCmNvbnN0IE5PVEVfT0ZGU0VUUyA9IFsKICB7IHBvc2l0aW9uOiAwIH0sICAgICAgICAgICAgICAgICAgLy8gQwogIHsgcG9zaXRpb246IDAsIHNoYXJwOiAxIH0sICAgICAgICAvLyBDIwogIHsgcG9zaXRpb246IDEgfSwgICAgICAgICAgICAgICAgICAvLyBECiAgeyBwb3NpdGlvbjogMSwgc2hhcnA6IDEgfSwgICAgICAgIC8vIEQjCiAgeyBwb3NpdGlvbjogMiB9LCAgICAgICAgICAgICAgICAgIC8vIEUKICB7IHBvc2l0aW9uOiAzIH0sICAgICAgICAgICAgICAgICAgLy8gRgogIHsgcG9zaXRpb246IDMsIHNoYXJwOiAxIH0sICAgICAgICAvLyBGIwogIHsgcG9zaXRpb246IDQgfSwgICAgICAgICAgICAgICAgICAvLyBHCiAgeyBwb3NpdGlvbjogNCwgc2hhcnA6IDEgfSwgICAgICAgIC8vIEcjCiAgeyBwb3NpdGlvbjogNSB9LCAgICAgICAgICAgICAgICAgIC8vIEEKICB7IHBvc2l0aW9uOiA1LCBzaGFycDogMSB9LCAgICAgICAgLy8gQSMKICB7IHBvc2l0aW9uOiA2IH0sICAgICAgICAgICAgICAgICAgLy8gQgpdOwoKY29uc3QgYnVpbGRTdGFmZkxpbmVzID0gKGxpbmVzLCBzdGFydCwgbGluZUhlaWdodCwgd2lkdGgpID0+IHsKICBjb25zdCBvdXQgPSBbXTsKICBsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7CiAgICBvdXQucHVzaCh7CiAgICAgIHgxOiAwLAogICAgICB4Mjogd2lkdGgsCiAgICAgIHkxOiBzdGFydCAtIGxpbmUgKiBsaW5lSGVpZ2h0LAogICAgICB5Mjogc3RhcnQgLSBsaW5lICogbGluZUhlaWdodCwKICAgICAgd2lkdGg6IDEsCiAgICB9KTsKICB9KTsKICByZXR1cm4gb3V0Owp9OwoKY29uc3QgZ2V0TGluZSA9IChub3RlKSA9PiAKICBOT1RFX09GRlNFVFNbbm90ZSAlIDEyXS5wb3NpdGlvbiAtICgoNSAtIE1hdGguZmxvb3Iobm90ZSAvIDEyKSkgKiA3KTsKCmNvbnN0IGdldE5vdGVzSW5mbyA9IChub3RlcykgPT4gewogIGxldCBoYXNTaGFycCA9IGZhbHNlOwogIGxldCBoYXNCYXNzTm90ZXMgPSBmYWxzZTsKICBsZXQgaGFzRXZlbiA9IGZhbHNlOwogIGxldCBoYXNPZGQgPSBmYWxzZTsKICBpZiAobm90ZXMpIHsKICAgIG5vdGVzLmZvckVhY2goKG5vdGUpID0+IHsKICAgICAgY29uc3Qgbm90ZUluT2N0YXZlID0gbm90ZSAlIDEyOwogICAgICBpZihOT1RFX09GRlNFVFNbbm90ZUluT2N0YXZlXS5zaGFycCkgewogICAgICAgIGhhc1NoYXJwID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAobm90ZSA8IDU4KSB7CiAgICAgICAgaGFzQmFzc05vdGVzID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGdldExpbmUobm90ZSkgJSAyID09PSAwKSB7CiAgICAgICAgaGFzRXZlbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaGFzT2RkID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgfQogIHJldHVybiB7CiAgICBoYXNTaGFycCwKICAgIGhhc0Jhc3NOb3RlcywKICAgIGhhc0V2ZW4sCiAgICBoYXNPZGQsCiAgICBib3RoU2lkZXM6IGhhc0V2ZW4gJiYgaGFzT2RkLAogIH07Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiB7CiAgICBzaG93VHJlYmxlQ2xlZjogewogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICBzaG93QmFzc0NsZWY6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9CiAgfSwKICBwcm9wczogewogICAgc2hvd0JyYWNlOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIHNob3dFbmQ6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgbm90ZXM6IHsKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgICBhY3RpdmU6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIGNvbnN0IGhlaWdodCA9IAogICAgICAodGhpcy5zaG93VHJlYmxlQ2xlZiA/IExJTkVfSEVJR0hUICogNiA6IDApICsKICAgICAgKHRoaXMuc2hvd0Jhc3NDbGVmID8gTElORV9IRUlHSFQgKiA2IDogMCkgKwogICAgICAodGhpcy5zaG93QmFzc0NsZWYgJiYgdGhpcy5zaG93VHJlYmxlQ2xlZiA/IExJTkVfSEVJR0hUICogNiA6IDApOwoKICAgIGNvbnN0IGluZm8gPSBnZXROb3Rlc0luZm8odGhpcy5ub3Rlcyk7CgogICAgbGV0IHdpZHRoID0gdGhpcy5zaG93QnJhY2UgPyA0NSA6IGluZm8uYm90aFNpZGVzID8gMzEgOiAyMDsKICAgIGlmICh0aGlzLnNob3dFbmQgJiYgIXRoaXMuc2hvd0JyYWNlICYmICF0aGlzLm5vdGVzKSB7CiAgICAgIHdpZHRoID0gMjsKICAgIH0KCiAgICBpZiAoaW5mby5oYXNTaGFycCkgewogICAgICB3aWR0aCArPSAxNDsKICAgIH0KCiAgICBjb25zdCBsaW5lUG9zaXRpb25zID0ge307CiAgICBpZiAodGhpcy5zaG93VHJlYmxlQ2xlZikgewogICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDY7IGkrKykgewogICAgICAgIGxpbmVQb3NpdGlvbnNbaV0gPSAxOwogICAgICB9CiAgICB9CiAgICBpZiAodGhpcy5zaG93QmFzc0NsZWYpIHsKICAgICAgZm9yIChsZXQgaSA9IC0zOyBpID4gLTg7IGktLSkgewogICAgICAgIGxpbmVQb3NpdGlvbnNbaV0gPSAxOwogICAgICB9CiAgICB9CgogICAgbGV0IGxpbmVzID0gW107CiAgICBsZXQgdG9wID0gVE9QX09GRlNFVDsKICAgIGxldCB0cmVibGVDbGVmU3RhcnQgPSAwOwogICAgbGV0IGJhc3NDbGVmU3RhcnQgPSAwOwogICAgbGV0IG1pZGRsZUMgPSBudWxsOwogICAgaWYgKHRoaXMuc2hvd1RyZWJsZUNsZWYpIHsKICAgICAgdHJlYmxlQ2xlZlN0YXJ0ID0gKExJTkVfSEVJR0hUICogdG9wKSAtIDExOwogICAgICBpZiAodGhpcy5zaG93RW5kKSB7CiAgICAgICAgbGluZXMucHVzaCh7CiAgICAgICAgICB4MTogMSwKICAgICAgICAgIHgyOiAxLAogICAgICAgICAgeTE6IHRvcCAqIExJTkVfSEVJR0hULAogICAgICAgICAgeTI6ICh0b3AgKyA0KSAqIExJTkVfSEVJR0hULAogICAgICAgICAgd2lkdGg6IDMsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgbWlkZGxlQyA9IChMSU5FX0hFSUdIVCAqIHRvcCkgKyAoTElORV9IRUlHSFQgKiA0LjUpOwogICAgICB0b3AgKz0gODsKICAgIH0KICAgIGlmICh0aGlzLnNob3dCYXNzQ2xlZikgewogICAgICBpZiAoIW1pZGRsZUMpIHsKICAgICAgICBtaWRkbGVDID0gKExJTkVfSEVJR0hUICogdG9wKSAtIChMSU5FX0hFSUdIVCAqIDMuNSk7CiAgICAgIH0KICAgICAgYmFzc0NsZWZTdGFydCA9IExJTkVfSEVJR0hUICogdG9wOwogICAgICBpZiAodGhpcy5zaG93RW5kKSB7CiAgICAgICAgbGluZXMucHVzaCh7CiAgICAgICAgICB4MTogMSwKICAgICAgICAgIHgyOiAxLAogICAgICAgICAgeTE6IHRvcCAqIExJTkVfSEVJR0hULAogICAgICAgICAgeTI6ICh0b3AgKyA0KSAqIExJTkVfSEVJR0hULAogICAgICAgICAgd2lkdGg6IDMsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBub3RlUG9zaXRpb25zID0gW107CiAgICBjb25zdCBzaGFycFBvc2l0aW9ucyA9IFtdOwogICAgaWYgKHRoaXMubm90ZXMpIHsKICAgICAgbGV0IGV2ZW5Ob3RlID0gMDsKICAgICAgbGV0IG9kZE5vdGUgPSAxMzsKCiAgICAgIGlmICghaW5mby5ib3RoU2lkZXMpIHsKICAgICAgICBldmVuTm90ZSA9IDI7CiAgICAgICAgb2RkTm90ZSA9IDI7CiAgICAgIH0KCiAgICAgIGlmIChpbmZvLmhhc1NoYXJwKSB7CiAgICAgICAgZXZlbk5vdGUgKz0gNjsKICAgICAgICBvZGROb3RlICs9IDY7CiAgICAgIH0KCiAgICAgIHRoaXMubm90ZXMuZm9yRWFjaCgobm90ZSkgPT4gewogICAgICAgIGNvbnN0IGxpbmUgPSBnZXRMaW5lKG5vdGUpOwogICAgICAgIG5vdGVQb3NpdGlvbnMucHVzaCh7CiAgICAgICAgICB4OiAobGluZSAlIDIpID09PSAwID8gZXZlbk5vdGUgOiBvZGROb3RlLAogICAgICAgICAgeTogbWlkZGxlQyAtIGxpbmUgKiAoTElORV9IRUlHSFQgLyAyKSwKICAgICAgICB9KTsKICAgICAgICBpZihOT1RFX09GRlNFVFNbbm90ZSAlIDEyXS5zaGFycCkgewogICAgICAgICAgc2hhcnBQb3NpdGlvbnMucHVzaCh7CiAgICAgICAgICAgIHg6IChsaW5lICUgMikgPT09IDAgPyBldmVuTm90ZSAtIDYgOiBvZGROb3RlICsgMTYsCiAgICAgICAgICAgIHk6IChtaWRkbGVDIC0gbGluZSAqIChMSU5FX0hFSUdIVCAvIDIpKSAtIDUsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGRyYXduTGluZSA9IE1hdGguZmxvb3IobGluZS8yKTsKCiAgICAgICAgaWYgKGRyYXduTGluZSA8PSAtOCkgewogICAgICAgICAgZm9yIChsZXQgbCA9IGRyYXduTGluZTsgbCA8PSAtODsgbCs9MSkgewogICAgICAgICAgICBsaW5lUG9zaXRpb25zW2xdID0gMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGRyYXduTGluZSA+IC0zICYmIGRyYXduTGluZSA8IDApIHsKICAgICAgICAgIGlmIChpbmZvLmhhc0Jhc3NOb3RlcykgewogICAgICAgICAgICBmb3IgKGxldCBsID0gLTM7IGwgPD0gZHJhd25MaW5lOyBsKz0xKSB7CiAgICAgICAgICAgICAgbGluZVBvc2l0aW9uc1tsXSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZvciAobGV0IGwgPSAwOyBsID4gZHJhd25MaW5lOyBsLT0xKSB7CiAgICAgICAgICAgICAgbGluZVBvc2l0aW9uc1tsXSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGRyYXduTGluZSA+IDUpIHsKICAgICAgICAgIGZvciAobGV0IGwgPSA1OyBsIDw9IGRyYXduTGluZTsgbCs9MSkgewogICAgICAgICAgICBsaW5lUG9zaXRpb25zW2xdID0gMTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICAgIGxpbmVzID0gWwogICAgICAuLi5saW5lcywKICAgICAgLi4uYnVpbGRTdGFmZkxpbmVzKAogICAgICAgIE9iamVjdC5rZXlzKGxpbmVQb3NpdGlvbnMpLm1hcChsID0+IHBhcnNlSW50KGwpKSwKICAgICAgICBtaWRkbGVDICsgKExJTkVfSEVJR0hULzIpLAogICAgICAgIExJTkVfSEVJR0hULAogICAgICAgIHdpZHRoLAogICAgICApLAogICAgXQoKICAgIHJldHVybiB7CiAgICAgIGxpbmVzLAogICAgICB3aWR0aCwKICAgICAgaGVpZ2h0LAogICAgICB0cmVibGVDbGVmU3RhcnQsCiAgICAgIGJhc3NDbGVmU3RhcnQsCiAgICAgIG5vdGVQb3NpdGlvbnMsCiAgICAgIHNoYXJwUG9zaXRpb25zLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFRyZWJsZUNsZWYsCiAgICBCYXNzQ2xlZiwKICAgIE5vdGUsCiAgICBTaGFycCwKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2xpY2soZSkgewogICAgICB0aGlzLiRlbWl0KCdjbGljaycsIGUpOwogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["Staff.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Staff.vue","sourceRoot":"node_modules/vue-music-notation/src/components","sourcesContent":["<template>\n  <svg\n    :width=\"width\"\n    :height=\"height\"\n    :class=\"{ container: true, active: active }\"\n    @click=\"onClick\"\n  >\n    <line\n      :x1=\"line.x1\"\n      :y1=\"line.y1\"\n      :x2=\"line.x2\"\n      :y2=\"line.y2\"\n      v-for=\"line in lines\"\n      :key=\"line.y1 + line.width\"\n      :style=\"`stroke:black;stroke-width:${line.width}`\"\n    />\n    <TrebleClef\n      :y=\"trebleClefStart\"\n      :x=\"5\"\n      v-if=\"showBrace && showTrebleClef\"\n    />\n    <BassClef\n      :y=\"bassClefStart\"\n      :x=\"10\"\n      v-if=\"showBrace && showBassClef\"\n    />\n    <Note\n      :x=\"note.x\"\n      :y=\"note.y\"\n      v-for=\"note in notePositions\"\n      :key=\"`note_${note.x}_${note.y}`\"\n    />\n    <Sharp\n      :x=\"sharp.x\"\n      :y=\"sharp.y\"\n      v-for=\"sharp in sharpPositions\"\n      :key=\"`sharp_${sharp.x}_${sharp.y}`\"\n    />\n  </svg>\n</template>\n\n<script>\nimport TrebleClef from './base/TrebleClef';\nimport BassClef from './base/BassClef';\nimport Note from './base/Note';\nimport Sharp from './base/Sharp';\n\nconst LINE_HEIGHT = 10;\nconst TOP_OFFSET = 3;\n\nconst NOTE_OFFSETS = [\n  { position: 0 },                  // C\n  { position: 0, sharp: 1 },        // C#\n  { position: 1 },                  // D\n  { position: 1, sharp: 1 },        // D#\n  { position: 2 },                  // E\n  { position: 3 },                  // F\n  { position: 3, sharp: 1 },        // F#\n  { position: 4 },                  // G\n  { position: 4, sharp: 1 },        // G#\n  { position: 5 },                  // A\n  { position: 5, sharp: 1 },        // A#\n  { position: 6 },                  // B\n];\n\nconst buildStaffLines = (lines, start, lineHeight, width) => {\n  const out = [];\n  lines.forEach((line) => {\n    out.push({\n      x1: 0,\n      x2: width,\n      y1: start - line * lineHeight,\n      y2: start - line * lineHeight,\n      width: 1,\n    });\n  });\n  return out;\n};\n\nconst getLine = (note) => \n  NOTE_OFFSETS[note % 12].position - ((5 - Math.floor(note / 12)) * 7);\n\nconst getNotesInfo = (notes) => {\n  let hasSharp = false;\n  let hasBassNotes = false;\n  let hasEven = false;\n  let hasOdd = false;\n  if (notes) {\n    notes.forEach((note) => {\n      const noteInOctave = note % 12;\n      if(NOTE_OFFSETS[noteInOctave].sharp) {\n        hasSharp = true;\n      }\n      if (note < 58) {\n        hasBassNotes = true;\n      }\n\n      if (getLine(note) % 2 === 0) {\n        hasEven = true;\n      } else {\n        hasOdd = true;\n      }\n    });\n  }\n  return {\n    hasSharp,\n    hasBassNotes,\n    hasEven,\n    hasOdd,\n    bothSides: hasEven && hasOdd,\n  };\n};\n\nexport default {\n  inject: {\n    showTrebleClef: {\n      default: false,\n    },\n    showBassClef: {\n      default: false,\n    }\n  },\n  props: {\n    showBrace: {\n      default: false,\n    },\n    showEnd: {\n      default: false,\n    },\n    notes: {\n      default: null,\n    },\n    active: {\n      default: false,\n    },\n  },\n  data() {\n    const height = \n      (this.showTrebleClef ? LINE_HEIGHT * 6 : 0) +\n      (this.showBassClef ? LINE_HEIGHT * 6 : 0) +\n      (this.showBassClef && this.showTrebleClef ? LINE_HEIGHT * 6 : 0);\n\n    const info = getNotesInfo(this.notes);\n\n    let width = this.showBrace ? 45 : info.bothSides ? 31 : 20;\n    if (this.showEnd && !this.showBrace && !this.notes) {\n      width = 2;\n    }\n\n    if (info.hasSharp) {\n      width += 14;\n    }\n\n    const linePositions = {};\n    if (this.showTrebleClef) {\n      for (let i = 1; i < 6; i++) {\n        linePositions[i] = 1;\n      }\n    }\n    if (this.showBassClef) {\n      for (let i = -3; i > -8; i--) {\n        linePositions[i] = 1;\n      }\n    }\n\n    let lines = [];\n    let top = TOP_OFFSET;\n    let trebleClefStart = 0;\n    let bassClefStart = 0;\n    let middleC = null;\n    if (this.showTrebleClef) {\n      trebleClefStart = (LINE_HEIGHT * top) - 11;\n      if (this.showEnd) {\n        lines.push({\n          x1: 1,\n          x2: 1,\n          y1: top * LINE_HEIGHT,\n          y2: (top + 4) * LINE_HEIGHT,\n          width: 3,\n        });\n      }\n      middleC = (LINE_HEIGHT * top) + (LINE_HEIGHT * 4.5);\n      top += 8;\n    }\n    if (this.showBassClef) {\n      if (!middleC) {\n        middleC = (LINE_HEIGHT * top) - (LINE_HEIGHT * 3.5);\n      }\n      bassClefStart = LINE_HEIGHT * top;\n      if (this.showEnd) {\n        lines.push({\n          x1: 1,\n          x2: 1,\n          y1: top * LINE_HEIGHT,\n          y2: (top + 4) * LINE_HEIGHT,\n          width: 3,\n        });\n      }\n    }\n\n    const notePositions = [];\n    const sharpPositions = [];\n    if (this.notes) {\n      let evenNote = 0;\n      let oddNote = 13;\n\n      if (!info.bothSides) {\n        evenNote = 2;\n        oddNote = 2;\n      }\n\n      if (info.hasSharp) {\n        evenNote += 6;\n        oddNote += 6;\n      }\n\n      this.notes.forEach((note) => {\n        const line = getLine(note);\n        notePositions.push({\n          x: (line % 2) === 0 ? evenNote : oddNote,\n          y: middleC - line * (LINE_HEIGHT / 2),\n        });\n        if(NOTE_OFFSETS[note % 12].sharp) {\n          sharpPositions.push({\n            x: (line % 2) === 0 ? evenNote - 6 : oddNote + 16,\n            y: (middleC - line * (LINE_HEIGHT / 2)) - 5,\n          });\n        }\n\n        const drawnLine = Math.floor(line/2);\n\n        if (drawnLine <= -8) {\n          for (let l = drawnLine; l <= -8; l+=1) {\n            linePositions[l] = 1;\n          }\n        } else if (drawnLine > -3 && drawnLine < 0) {\n          if (info.hasBassNotes) {\n            for (let l = -3; l <= drawnLine; l+=1) {\n              linePositions[l] = 1;\n            }\n          } else {\n            for (let l = 0; l > drawnLine; l-=1) {\n              linePositions[l] = 1;\n            }\n          }\n        } else if (drawnLine > 5) {\n          for (let l = 5; l <= drawnLine; l+=1) {\n            linePositions[l] = 1;\n          }\n        }\n      });\n    }\n\n    lines = [\n      ...lines,\n      ...buildStaffLines(\n        Object.keys(linePositions).map(l => parseInt(l)),\n        middleC + (LINE_HEIGHT/2),\n        LINE_HEIGHT,\n        width,\n      ),\n    ]\n\n    return {\n      lines,\n      width,\n      height,\n      trebleClefStart,\n      bassClefStart,\n      notePositions,\n      sharpPositions,\n    };\n  },\n  components: {\n    TrebleClef,\n    BassClef,\n    Note,\n    Sharp,\n  },\n  methods: {\n    onClick(e) {\n      this.$emit('click', e);\n    },\n  },\n}\n</script>\n\n<style scoped>\n.container {\n  display: inline-block;\n}\n.active {\n  background-color: lightblue;\n}\n</style>"]}]}